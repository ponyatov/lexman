\secrel{Лексер для языка \bi: script/lpp.lpp}\label{bilex}

Так как используется модульная компиляция, в файле \file{hpp.hpp}\ вынесены
объявления, которые нам нужно подключить: 

\lst{lpp.lpp}{tmp/lpp.hpp}{c++}

Макрос \verb|TOC|\ выполняет токенизацию символьного объекта \ref{symbol},
возвращая ссылку на объект и код токена в парсер: 

\lst{hpp.hpp}{tmp/hpp.TOC}{c++}\label{TOC}

\bigskip
Для компиляции и вывода номера строк в синтаксических ошибках
нужно включить пару опций:
 
\lstx{lpp.lpp}{tmp/lpp.options}

\subsubsection{Комментарий}

\lst{lpp.lpp}{tmp/lpp.comment}{c++}

\subsubsection{Строка}\label{lexstring}

Для разбора строк будет использоваться специальное состояние лексера,
и отдельный буфер разбора:  

\lst{lpp.lpp}{tmp/lpp.str}{c++}

В области определений задана строка\ --- буфер для накомпления символов строки
при ее разборе.

Через \verb|%x|\ создано \termdef{состояние лексера}{состояние лексера},
в области правил для этого состояния через \verb|<состояние>|\ задаются 
специальные \emph{правила, срабатывающие только для этого состояния}.

Состояния лексера переключаются макросом \verb|BEGIN()|, состояние по 
умолчанию\ --- \verb|INITIAL|.

\begin{description}
\item{\verb|'|} переключает состояние лексера, и обнуляет накопительный буфер
\item{\verb|<stringstate>'|} выключает состояние \verb|stringstate|,
и реализует работу макроса \verb|TOC(C,X)|\ особым образом, создавая объект
\verb|Str|\ из содержимого буфера, а не строки \verb|*yytext|
\item{\verb|<stringstate>.|} добавляет в буфер (.)=любой символ
\end{description}

\subsubsection{Числа}\label{lexnumbers}

\lst{lpp.lpp}{tmp/lpp.number}{c++}

При распозанавании чисел используется подставновка regexp-переменных
\verb|{S}|\ (знак числа) и \verb|{N}|\ (цифры), заданных в области определений. 

\subsubsection{Символ}\label{lexsymbol}

Все нераспознанные блоки текста, состоящие из литинских букв и цифр,
распознаются как \term{символ}\ \ref{symbol}:

\lst{lpp.lpp}{tmp/lpp.sym}{c++}

\subsubsection{Операторы}\label{lexops}

\lst{lpp.lpp}{tmp/lpp.ops}{c++}
